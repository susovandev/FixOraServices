<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title><%= job.title %> | Careers | FixOra</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>

<body class="bg-slate-50 text-slate-800">
<%- include("../partials/toast.ejs") %>

<!-- HEADER INCLUDE -->
<%- include("../partials/client/header.ejs") %>

<!-- HEADER -->
<section class="bg-gradient-to-r from-slate-900 to-slate-700 text-white py-16">
  <div class="max-w-5xl mx-auto px-6">
    <h1 class="text-4xl font-bold mb-3"><%= job.title %></h1>
    <p class="text-slate-300 text-sm">
      <i class="fa-solid fa-location-dot mr-1"></i> <%= job.location %>
      â€¢
      <i class="fa-solid fa-clock mr-1"></i> <%= job.type %>
    </p>
  </div>
</section>

<!-- CONTENT -->
<section class="max-w-5xl mx-auto px-6 py-14 grid md:grid-cols-3 gap-10">

  <!-- JOB DETAILS -->
  <div class="md:col-span-2 bg-white border rounded-2xl p-8 shadow-sm">

    <h2 class="text-xl font-semibold mb-4">Job Description</h2>
    <p class="text-slate-600 whitespace-pre-line"><%= job.description %></p>

    <% if(job.responsibilities){ %>
    <h3 class="font-semibold mt-8 mb-2">Responsibilities</h3>
    <ul class="list-disc ml-6 text-slate-600 space-y-1">
      <% job.responsibilities.forEach(r=>{ %>
      <li><%= r %></li>
      <% }) %>
    </ul>
    <% } %>

    <% if(job.requirements){ %>
    <h3 class="font-semibold mt-8 mb-2">Requirements</h3>
    <ul class="list-disc ml-6 text-slate-600 space-y-1">
      <% job.requirements.forEach(r=>{ %>
      <li><%= r %></li>
      <% }) %>
    </ul>
    <% } %>

  </div>


  <!-- APPLY FORM -->
  <div class="bg-white border rounded-2xl p-8 shadow-sm h-fit sticky top-10">

    <h2 class="text-lg font-semibold mb-5">Apply for this role</h2>

    <form action="/career/<%= job._id %>/apply" method="POST" enctype="multipart/form-data" class="space-y-4">

      <input type="text" name="name" required placeholder="Full Name"
        class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-slate-500 outline-none">

      <input type="email" name="email" required placeholder="Email Address"
        class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-slate-500 outline-none">

      <input type="tel" name="phone" required placeholder="Phone Number"
        class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-slate-500 outline-none">

      <!-- RESUME -->
      <div>
        <label class="text-sm text-slate-600 block mb-1">Upload Resume</label>
        <input type="file" name="resume" required
          class="w-full text-sm border rounded-xl p-2 bg-slate-50">
      </div>

      <!-- MESSAGE -->
      <textarea name="message" rows="3" placeholder="Short message (optional)"
        class="w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-slate-500 outline-none"></textarea>

      <button
        class="w-full py-3 rounded-xl bg-slate-900 text-white hover:bg-slate-600 transition font-medium">
        Submit Application
      </button>

    </form>

  </div>

</section>

<!-- FOOTER -->
<%- include("../partials/client/footer.ejs") %>
<%- include("../partials/client/profile-script.ejs") %>
</body>
</html>
