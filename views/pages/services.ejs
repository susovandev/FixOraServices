<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Services</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<link rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>


<style>
body{
background:
radial-gradient(circle at 0% 0%, rgba(99,102,241,.06),transparent 40%),
radial-gradient(circle at 100% 0%, rgba(16,185,129,.05),transparent 40%),
#f8fafc;
}
</style>

<style>


.premium-scroll{
  scrollbar-width: thin;
  scrollbar-color: #0f0f10 transparent;
}


.premium-scroll::-webkit-scrollbar{
  width:8px;
}

.premium-scroll::-webkit-scrollbar-track{
  background:transparent;
}

.premium-scroll::-webkit-scrollbar-thumb{
  background:linear-gradient(
    to bottom,
    #101011,
    #0f0f0f
  );
  border-radius:999px;
  border:2px solid transparent;
  background-clip:padding-box;
  transition:all .3s ease;
}


.premium-scroll::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(
    to bottom,
    #151515,
    #0a0a0a
  );
}


.premium-scroll{
  scroll-behavior:smooth;
}

.premium-scroll::-webkit-scrollbar-thumb{
  opacity:0;
}

.premium-scroll:hover::-webkit-scrollbar-thumb{
  opacity:1;
}


</style>

</head>

<body class="text-slate-800">
  <%- include("../partials/toast.ejs") %>

<!-- HEADER -->
<%- include("../partials/client/header.ejs") %>


<!-- MAIN LAYOUT -->
<div class="max-w-7xl mx-auto px-6 mt-8 mb-16">

<div class="grid grid-cols-12 gap-6">

<!-- LEFT SIDEBAR -->
<aside class="col-span-12 md:col-span-3">

<div class="bg-white rounded-2xl border border-slate-200 p-5 sticky top-24">

<h3 class="font-semibold mb-4">Categories</h3>

<div class="space-y-2 text-sm">

<% categories.forEach(c => { %>

<a href="/services?categoryId=<%= c._id %>"
   class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-slate-50 hover:text-slate-600 transition">
   <i class="<%= c.icon %> w-8 h-8 flex items-center justify-center rounded-lg bg-slate-100 text-slate-600"></i>
   <span><%= c.name %></span>
</a>
<% }) %>


</div>

</aside>



<!-- CENTER SCROLLABLE SERVICES -->
<main class="col-span-12 md:col-span-6">

  <div class="bg-white border border-slate-200 rounded-2xl shadow-sm">

    <!-- HEADER -->
    <div class="p-6 border-b flex justify-between items-center bg-gradient-to-r from-slate-50 to-white rounded-t-2xl">
      <div>
        <h2 class="font-semibold text-xl text-slate-800">
          Available Services
        </h2>
        <p class="text-sm text-slate-500 mt-1">
          <%= services?.length || 0 %> services found
        </p>
      </div>
    </div>

    <!-- SCROLLABLE GRID -->
    <div class="p-6 max-h-[70vh] overflow-y-auto premium-scroll">

      <% if(services && services.length){ %>

      <div class="grid grid-cols-1 gap-6">

        <% services.forEach(s => { %>

        <a href="/services/<%= s._id %>"
           class="group bg-white border border-slate-200 rounded-2xl overflow-hidden hover:shadow-xl hover:-translate-y-1 transition duration-300">

          <!-- IMAGE -->
          <div class="relative h-40 w-full overflow-hidden bg-slate-100">

            <img 
              src="<%= (s.images && s.images[0]?.url) || 'https://dummyimage.com/600x400' %>"
              class="w-full h-full object-cover group-hover:scale-105 transition duration-500"
              alt="<%= s.name %>"
            />

            <!-- INSTANT BADGE -->
            <% if(s.instant){ %>
            <div class="absolute top-3 left-3 z-10">
              <span class="flex items-center gap-1 text-[11px] font-semibold
                           px-3 py-1.5
                           bg-emerald-500/95 text-white
                           backdrop-blur
                           rounded-full shadow-lg
                           ring-1 ring-white/40">
                <span class="w-1.5 h-1.5 bg-white rounded-full animate-pulse"></span>
                Instant
              </span>
            </div>
            <% } %>

            <!-- DURATION -->
            <span class="absolute bottom-3 right-3 text-xs px-3 py-1 bg-white/90 backdrop-blur border rounded-full text-slate-700 shadow-sm">
              <%= s.baseDurationMinutes %> min
            </span>

          </div>

          <!-- CONTENT -->
          <div class="p-5">

            <h3 class="font-semibold text-slate-800 group-hover:text-slate-600 transition">
              <%= s.name %>
            </h3>

            <p class="text-sm text-slate-500 mt-2 line-clamp-2">
              <%= s.description %>
            </p>

            <!-- FOOTER -->
            <div class="mt-5 flex justify-between items-center">

              <span class="text-slate-900 font-semibold text-lg">
                ₹<%= s.pricingId?.basePrice || "—" %>
              </span>

              <span class="text-sm px-4 py-1.5 bg-slate-900 text-white rounded-lg group-hover:bg-slate-600 transition">
                View Details
              </span>

            </div>

          </div>

        </a>

        <% }) %>

      </div>

      <% } else { %>

      <!-- EMPTY STATE -->
      <div class="flex flex-col items-center justify-center text-center py-20">

        <div class="w-20 h-20 rounded-full bg-slate-100 flex items-center justify-center mb-5 shadow-inner">
          <svg xmlns="http://www.w3.org/2000/svg"
               class="w-10 h-10 text-slate-400"
               fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                  d="M9 17v-6a3 3 0 016 0v6M8 21h8a2 2 0 002-2v-5a7 7 0 10-14 0v5a2 2 0 002 2z"/>
          </svg>
        </div>

        <h3 class="text-lg font-semibold text-slate-700">
          Services currently not available
        </h3>

        <p class="text-sm text-slate-500 mt-2 max-w-sm">
          We couldn’t find any services in this category right now.
          Please try another category or check back later.
        </p>

      </div>

      <% } %>

    </div>

  </div>

</main>





<!-- RIGHT PANEL -->
<aside class="col-span-12 md:col-span-3">

<div class="space-y-6 sticky top-24">

<!-- PREMIUM ANIMATED PROMO -->
<div class="relative overflow-hidden rounded-2xl p-6 text-white
            bg-slate-900
            shadow-xl hover:shadow-2xl hover:-translate-y-1
            transition-all duration-300 group">

  <!-- GLOW BLOBS -->
  <div class="absolute -top-10 -right-10 w-32 h-32 bg-white/10 rounded-full blur-2xl animate-pulse"></div>
  <div class="absolute -bottom-10 -left-10 w-40 h-40 bg-pink-400/20 rounded-full blur-3xl animate-pulse"></div>

  <!-- BADGE -->
  <span class="absolute top-4 left-4
               text-xs px-3 py-1
               bg-white text-slate-700
               font-semibold rounded-full
               shadow-lg animate-bounce">
    Limited Time
  </span>

  <!-- CONTENT -->
  <div class="relative z-10 mt-6">

    <p class="text-sm opacity-90">Exclusive Deal</p>

    <h3 class="text-xl font-bold mt-1">
      Save ₹299 on Home Services
    </h3>

    <p class="text-sm opacity-90 mt-2">
      Premium technicians. Fast booking. Zero hassle.
    </p>

    <!-- COUPON -->
    <div class="mt-4 flex items-center justify-between
                bg-white/10 backdrop-blur-md
                border border-white/20
                rounded-lg px-4 py-2">

      <span class="font-semibold tracking-wider">
        FIXORA299
      </span>

      <button class="text-xs bg-white text-slate-700
                     px-3 py-1 rounded-md
                     hover:bg-slate-100 transition">
        Copy
      </button>

    </div>

    <!-- CTA -->
    <a href="/services/premium"
       class="relative mt-5 block text-center
              bg-white text-slate-700
              font-semibold py-2 rounded-xl
              overflow-hidden group">

      <!-- Shine Effect -->
      <span class="absolute inset-0 -translate-x-full
                   bg-gradient-to-r from-transparent via-white/50 to-transparent
                   group-hover:translate-x-full
                   transition-transform duration-700 ease-in-out"></span>

      <span class="relative z-10">
        Claim Offer
      </span>

    </a>

  </div>

</div>

</div>

</aside>

</div>
</div>


<!-- FOOTER -->
<%- include("../partials/client/footer.ejs") %>
<%- include("../partials/client/profile-script.ejs") %>


<!-- CONTACT FLOAT BUTTON -->
<div class="fixed bottom-6 right-6 z-50">

  <button onclick="openContactModal()"
    class="relative flex items-center gap-3 px-5 py-3
           bg-slate-900
           text-white font-medium text-sm
           rounded-full shadow-lg
           hover:scale-105 active:scale-95
           transition-all duration-300">

    <!-- Pulse Ring -->
    <span class="absolute inset-0 rounded-full
                 bg-slate-900 opacity-20
                 animate-ping"></span>

    <i class="fa-solid fa-headset relative z-10"></i>
    <span class="relative z-10">Contact Support</span>
  </button>

</div>

<div id="contactModal"
     class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden
            items-center justify-center z-50">

  <div class="bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl relative">

    <button onclick="closeContactModal()"
      class="absolute top-4 right-4 text-slate-400 hover:text-slate-800">
      <i class="fa-solid fa-xmark"></i>
    </button>

    <h2 class="text-xl font-semibold mb-4">Contact Support</h2>

    <p class="text-sm text-slate-500 mb-6">
      Our team is ready to assist you.
    </p>

    <a href="/contact"
       class="block w-full text-center py-3 bg-slate-900
              text-white rounded-xl hover:bg-slate-700 transition">
      Go to Support
    </a>

  </div>
</div>

<script>
function openContactModal(){
  document.getElementById('contactModal').classList.remove('hidden');
  document.getElementById('contactModal').classList.add('flex');
}

function closeContactModal(){
  document.getElementById('contactModal').classList.add('hidden');
  document.getElementById('contactModal').classList.remove('flex');
}
</script>

<%- include("../partials/toast-script.ejs") %>
</body>
</html>
